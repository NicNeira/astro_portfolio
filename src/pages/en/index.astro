---
import Hero from "@components/Hero.astro";
import Content from "@components/Content.astro";
import Steps from "@components/Steps.astro";
import Skill from "@components/Skill.astro";
import CallToAction from "@components/CallToAction.astro";
import Layout from "@layouts/PageLayout.astro";

import ProfilePhoto from "../../assets/images/profile.jpg";
import AboutPhoto from "../../assets/images/about.jpg";

import { getContentProjects } from "@utils/projectsData";
import { useTranslations } from "@utils/i18n";

const lang = "en";
const t = useTranslations(lang);

const profileName = t("hero.name");
const subTitle = t("hero.subtitle");

const metadata = {
  title: t("site.title"),
  description: t("site.description"),
  canonical: "https://maximiliano-neira.com/en/",
};

const ContentProjects = getContentProjects(t, lang);
const portfolioSectionTitle = t("portfolio.title");
const portfolioSectionSubtitle = t("portfolio.subtitle");
---

<Layout metadata={metadata}>
  <Hero
    id="hero"
    title={profileName}
    subtitle={subTitle}
    image={{
      src: ProfilePhoto,
      alt: "Portrait of Maximiliano Neira, art director and filmmaker",
      width: 400,
      height: 400,
    }}
  >
    <Fragment slot="paragraph">
      {t("hero.description")}
    </Fragment>
  </Hero>

  <Content
    id="about"
    columns={3}
    video={{
      src: "https://maxistorage.blob.core.windows.net/assets/reel.mp4",
      alt: "About Me Video",
    }}
  >
    <Fragment slot="content">
      <h1
        class="text-5xl md:text-6xl font-bold leading-tighter tracking-tighter mb-4 font-heading dark:text-gray-200 intersect-once intersect-quarter motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade"
        set:html={t("about.title")}
      />
      <p>
        {t("about.description")}
      </p>
      <p class="mt-2">
        {t("about.description-2")}
      </p>
    </Fragment>
  </Content>

  <Steps
    id="resume"
    title={t("experience.title")}
    items={[
      {
        title: `${t("experience.student.title")} <br /> <span class="font-normal">${t("experience.student.company")}</span> <br /> <span class="text-sm font-normal">${t("experience.student.period")}</span>`,
        description: `${t("experience.student.description")} <br /> <a href="https://www.arcos.cl/carreras/cine/" target="_blank" class="text-primary hover:underline">arcos.cl</a>`,
        icon: "tabler:school",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: `${t("experience.casa-hojas.title")} <br /> <span class="font-normal">${t("experience.casa-hojas.project")}</span> <br /> <span class="text-sm font-normal">${t("experience.casa-hojas.period")}</span>`,
        description: t("experience.casa-hojas.description"),
        icon: "tabler:palette",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: `${t("experience.ciudad-latente.title")} <br /> <span class="font-normal">${t("experience.ciudad-latente.project")}</span> <br /> <span class="text-sm font-normal">${t("experience.ciudad-latente.period")}</span>`,
        description: t("experience.ciudad-latente.description"),
        icon: "tabler:building-estate",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: `${t("experience.inhumano.title")} <br /> <span class="font-normal">${t("experience.inhumano.project")}</span> <br /> <span class="text-sm font-normal">${t("experience.inhumano.period")}</span>`,
        description: t("experience.inhumano.description"),
        icon: "tabler:movie",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: `${t("experience.retrato-oval.title")} <br /> <span class="font-normal">${t("experience.retrato-oval.project")}</span> <br /> <span class="text-sm font-normal">${t("experience.retrato-oval.period")}</span>`,
        description: t("experience.retrato-oval.description"),
        icon: "tabler:brush",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
    ]}
    classes={{ container: "max-w-3xl" }}
  />

  <!-- Skills -->
  <Skill
    id="skills"
    title={t("skills.title")}
    subtitle={t("skills.subtitle")}
    columns={3}
    defaultIcon="tabler:point-filled"
    items={[
      {
        title: t("skills.art-direction.title"),
        description: t("skills.art-direction.description"),
        icon: "tabler:palette",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: t("skills.model-design.title"),
        description: t("skills.model-design.description"),
        icon: "tabler:3d-cube-sphere",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: t("skills.cinematography.title"),
        description: t("skills.cinematography.description"),
        icon: "tabler:camera",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: t("skills.services.title"),
        description: t("skills.services.description"),
        icon: "tabler:list-check",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
      {
        title: t("skills.languages.title"),
        description: t("skills.languages.description"),
        icon: "tabler:language",
        classes: {
          title: "dark:text-white",
          description: "dark:text-gray-400",
        },
      },
    ]}
  />

  <!-- Projects -->
  {
    ContentProjects.map((project, index) => (
      <Content
        id={index === 0 ? "porfolio" : undefined}
        title={index === 0 ? portfolioSectionTitle : undefined}
        subtitle={index === 0 ? portfolioSectionSubtitle : undefined}
        isReversed={true}
        isAfterContent={index !== 0}
        items={[
          {
            title: t("general.description"),
            description: project.description,
          },
        ]}
        image={project.image}
        callToAction={{
          text: t("general.view-project"),
          icon: "tabler:chevron-right",
          href: project.href,
        }}
      >
        {" "}
        <Fragment slot="content">
          <h3
            class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2"
            set:html={project.projectTitleHTML}
            transition:name={`title-${project.id}`}
            transition:animate="fade"
          />
          <div transition:name={`description-${project.id}`} class="hidden" />
        </Fragment>
        <Fragment slot="bg">
          <div class="absolute inset-0 bg-blue-50 dark:bg-transparent" />
        </Fragment>
      </Content>
    ))
  }

  <!-- CallToAction Widget *********** -->
  <CallToAction
    title={t("cta.title")}
    subtitle={t("cta.subtitle")}
    actions={[
      {
        variant: "primary",
        text: t("cta.button"),
        href: "/en/contact",
      },
    ]}
  />
</Layout>
